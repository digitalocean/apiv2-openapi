allOf:
- $ref: app_component_base.yml

- type: object
  properties:
    cors:
      $ref: apps_cors_policy.yml

    health_check:
      $ref: app_service_spec_health_check.yml

    http_port:
      type: integer
      description: |-
        The internal port on which this service's run command will listen. Default: 8080
        If there is not an environment variable with the name `PORT`, one will be automatically added with its value set to the value of this field.
      format: int64
      maximum: 65535
      minimum: 1
      example: 3000

    instance_count:
      type: integer
      format: int64
      minimum: 1
      description: 'The amount of instances that this component should be scaled to. Default: 1'
      example: 2

    instance_size_slug:
      description: 'The instance size to use for this component. Default: `basic-xxs`'
      type: string
      enum:
      - basic-xxs
      - basic-xs
      - basic-s
      - basic-m
      - professional-xs
      - professional-s
      - professional-m
      - professional-1l
      - professional-l
      - professional-xl
      example: basic-xxs

    internal_ports:
      type: array
      description: The ports on which this service will listen for internal traffic.
      items:
        format: int64
        type: integer
      example:
      - 80
      - 443

    routes:
      type: array
      description: A list of HTTP routes that should be routed to this component.
      items:
        $ref: app_route_spec.yml

  required:
  - name
